# 网络科学基础第四次上级报告

## 一、上机题目

Pagerank算法与生成图

## 二、上机目的

本次上机的目的是通过实现PageRank算法来理解和应用网络科学中的链接分析方法。通过计算给定图的PageRank值，可以评估各个节点的相对重要性，同时可以根据需要修改程序，调整每条边的权重，并在图上显示这些权重。此外，任务还要求生成一个随机图，通过不同概率连接节点，展示图结构随概率变化的效果，进一步探索网络中节点连接性与重要性的关系。

## 三、上机程序

### PageRank算法

计算并显示下图的PageRank值，同时改造该程序并自定义途中每条边的权重，权重值显示在图上面。矩阵B，即为邻接矩阵，记矩阵B的列和及行和分别是
$$
c_j = \sum_{i = 1}^{N} b_{ij}, r_i = \sum_{j = 1}^{N} b_{ij},
$$
它们分别给出了页面 $$j$$ 的连入数目和页面 $$i$$​ 的连出链接数目。

加入在上网时浏览页面并选择下一个页面的过程，与过去浏览过哪些页面无关，而仅依赖于当前所在的页面，那么这一选择过程可以认为是一个有限状态、离散时间的随机过程，其状态转移规律可用Markov链描述。定于矩阵$$A = (a_{ij})_{N \times N}$$ 如下：
$$
a_{ij} = \frac{1 - d}{N} + d\frac{b_{ij}}{r_i}
$$


```matlab
clc;
clear;
B = zeros(6);
B(1, 2) = 1; 
B(2, [3, 4]) = 1;
B(3, 4:6) = 1; 
B(4, 1) = 1;
B(5, 6) = 1; 
B(6, 1) = 1;

nodes = {'1.alpha','2.beta','3.gamma','4.delta','5.rho','6.sigma'};

% 创建有向图
G = digraph(B, nodes);
% 显示图形
figure;
h = plot(G, 'Layout', 'force', 'EdgeLabel', G.Edges.Weight);
h.EdgeColor = [0, 0, 0];  % 设置边的颜色
h.Marker = 'o';           % 设置节点的形状

% 状态转移矩阵
r = sum(B, 2);
n = length(B);
A = zeros(n);

for i = 1:n
    for j = 1:n
        A(i,j) = 0.15 + 0.85 * B(i, j) / r(i);  % 构造状态转移矩阵
    end
end

disp(A);  % 显示状态转移矩阵

% 求解最大特征值对应的特征向量
[x, y] = eigs(A', 1);
x = x / sum(x);  % 特征向量归一化

% 绘制PageRank值的柱状图
figure;
bar(x);
title('PageRank values');

```

![image-20241204140649338](C:\Users\Holme\AppData\Roaming\Typora\typora-user-images\image-20241204140649338.png)

### 生成图

该代码通过生成 n=9n = 9 个均匀分布在单位圆上的节点，绘制一个完全图，并在此基础上通过不同的概率（如 0.1、0.15 和 0.25）随机连接节点之间的边。使用 `rand` 函数生成随机数，并根据给定的概率计算哪些节点之间应建立连接。绘制的结果展示了节点间连接情况在不同概率下的变化，通过子图的方式呈现了节点分布和连接边的效果。

```matlab
function main
    global m n x y                      %定义全局变量
    clc
    n = 9;
    t = 0 : 2 * pi / n : 2 * pi;
    m = nchoosek(n, 2);                 %计算n个节点的完全图的边数m
    x = cos(t);
    y = sin(t);
    axis([-1.1, 1.1, -1.1, 1.1])
    
    subplot(1, 2, 1), plot(x, y, 'o', 'Color', 'k')
    subplot(1, 2, 2), hold on
    
    % 绘制不同概率下的连边
    [i1, j1] = myfun(0.1);               %根据概率0.1,调用函数计算连边的地址,并画图
    [i2, j2] = myfun(0.15);              %根据概率0.15,调用函数计算连边的地址,并画图
    [i3, j3] = myfun(0.25);              %根据概率0.25,调用函数计算连边的地址,并画图

    % 该函数根据给定的概率p,计算连边的节点i与j
    global m n x y                          %定义全局变量 
    function [i, j] = myfun(p)          

        z = rand(1, m);                     %生成m个随机数
        ind1 = (z <= p);                    %找z中小于等于p的随机数,对应的地址将来连边
        ind2 = squareform(ind1);            %把0-1向量转换成邻接矩阵
        [i, j] = find(ind2);                %求边的节点编号
        
        % 绘制节点和边
        plot(x, y, 'o', 'Color', 'k')  
        for k = 1:length(i)
            line([x(i(k)), x(j(k))], [y(i(k)), y(j(k))], 'color', 'k')  % 连接边
        end
    end
end

```



![image-20241204104535757](C:\Users\Holme\AppData\Roaming\Typora\typora-user-images\image-20241204104535757.png)

## 四、上机感悟

通过本次上机，深入理解了PageRank算法的工作原理以及如何通过矩阵表示图的结构，进一步学习了如何利用Markov链模型描述页面跳转的过程。实现PageRank算法时，我体会到了图算法中的矩阵运算和特征向量求解的关键作用。通过改造程序，自定义边的权重，帮助我更好地理解了权重在影响PageRank值计算中的作用，并学会了如何通过调整边的权重来影响图的拓扑结构和节点的重要性。

在生成图部分，我认识到随机图模型如何通过概率控制节点间的连接情况，并且观察了不同连接概率下图的结构变化。这不仅提升了我对图论的理解，也增强了我在实际应用中灵活运用图模型的能力。总的来说，本次上机加深了我对网络科学的理解，尤其是PageRank算法的实现与优化，对于后续深入研究复杂网络的动态演化具有很大帮助。
